/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/argue/route";
exports.ids = ["app/api/argue/route"];
exports.modules = {

/***/ "(rsc)/./app/api/argue/route.ts":
/*!********************************!*\
  !*** ./app/api/argue/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nconst OPENROUTER_URL = \"https://openrouter.ai/api/v1/chat/completions\";\nconst OPENROUTER_MODEL = process.env.OPENROUTER_MODEL ?? \"deepseek/deepseek-chat-v3.1:free\";\nconst MODEL_FALLBACKS = process.env.OPENROUTER_MODELS ?? `${OPENROUTER_MODEL},openrouter/auto`;\nasync function POST(request) {\n    try {\n        const { opponentLine, intensity } = await request.json();\n        if (typeof opponentLine !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"请提供对方的话（字符串）。\"\n            }, {\n                status: 400\n            });\n        }\n        const trimmedOpponentLine = opponentLine.trim();\n        if (!trimmedOpponentLine) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"请先输入对方说了什么。\"\n            }, {\n                status: 400\n            });\n        }\n        const parsedIntensity = typeof intensity === \"number\" ? clampIntensity(intensity) : typeof intensity === \"string\" ? clampIntensity(Number.parseInt(intensity, 10)) : DEFAULT_INTENSITY;\n        const apiKey = process.env.OPENROUTER_API_KEY;\n        if (!apiKey) {\n            console.error(\"OPENROUTER_API_KEY missing\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"服务器未正确配置 OpenRouter API Key。\"\n            }, {\n                status: 500\n            });\n        }\n        const referer = request.headers.get(\"origin\") ?? \"https://localhost-placeholder\";\n        const models = parseModelList(MODEL_FALLBACKS);\n        const stream = new ReadableStream({\n            start: async (controller)=>{\n                const encoder = new TextEncoder();\n                const send = (chunk)=>{\n                    controller.enqueue(encoder.encode(`${JSON.stringify(chunk)}\\n`));\n                };\n                const errors = [];\n                const closeWithError = (error, status = 500)=>{\n                    send({\n                        type: \"error\",\n                        error,\n                        status\n                    });\n                    controller.close();\n                };\n                try {\n                    for (const model of models){\n                        send({\n                            type: \"model\",\n                            model\n                        });\n                        const completionResponse = await fetch(OPENROUTER_URL, {\n                            method: \"POST\",\n                            headers: {\n                                Authorization: `Bearer ${apiKey}`,\n                                \"Content-Type\": \"application/json\",\n                                \"HTTP-Referer\": referer,\n                                // HTTP headers must stay within the Latin-1 charset; use ASCII-only title.\n                                \"X-Title\": \"Chaojia\"\n                            },\n                            body: JSON.stringify({\n                                model,\n                                stream: true,\n                                messages: buildMessages(trimmedOpponentLine, parsedIntensity),\n                                temperature: mapIntensityToTemperature(parsedIntensity),\n                                top_p: 0.9,\n                                max_tokens: 512,\n                                presence_penalty: mapIntensityToPresencePenalty(parsedIntensity)\n                            })\n                        });\n                        if (!completionResponse.ok) {\n                            const errorPayload = await safeRead(completionResponse);\n                            const errorMessage = extractErrorMessage(errorPayload);\n                            console.error(\"OpenRouter error\", {\n                                model,\n                                error: errorPayload\n                            });\n                            errors.push({\n                                model,\n                                status: completionResponse.status,\n                                message: errorMessage\n                            });\n                            if (!shouldRetry(completionResponse.status, errorMessage)) {\n                                closeWithError(errorMessage, completionResponse.status);\n                                return;\n                            }\n                            continue;\n                        }\n                        const body = completionResponse.body;\n                        if (!body) {\n                            errors.push({\n                                model,\n                                status: 502,\n                                message: \"模型返回空响应，请稍后再试。\"\n                            });\n                            continue;\n                        }\n                        const reader = body.getReader();\n                        const decoder = new TextDecoder(\"utf-8\");\n                        let buffer = \"\";\n                        let aggregated = \"\";\n                        let lastSent = [];\n                        const flushPartial = ()=>{\n                            const replies = collectReplies(aggregated);\n                            if (replies.length === 0) {\n                                return;\n                            }\n                            if (arraysEqual(replies, lastSent)) {\n                                return;\n                            }\n                            lastSent = replies;\n                            send({\n                                type: \"partial\",\n                                replies\n                            });\n                        };\n                        let streamFailed = false;\n                        while(true){\n                            const { value, done } = await reader.read();\n                            if (done) {\n                                break;\n                            }\n                            buffer += decoder.decode(value, {\n                                stream: true\n                            });\n                            const events = buffer.split(\"\\n\\n\");\n                            buffer = events.pop() ?? \"\";\n                            for (const event of events){\n                                const lines = event.split(\"\\n\");\n                                for (const rawLine of lines){\n                                    const line = rawLine.trim();\n                                    if (!line.startsWith(\"data:\")) {\n                                        continue;\n                                    }\n                                    const data = line.slice(5).trim();\n                                    if (!data || data === \"[DONE]\") {\n                                        continue;\n                                    }\n                                    let parsed;\n                                    try {\n                                        parsed = JSON.parse(data);\n                                    } catch (parseError) {\n                                        console.warn(\"Failed to parse streaming chunk\", parseError, data);\n                                        continue;\n                                    }\n                                    const deltaText = extractDeltaText(parsed);\n                                    if (!deltaText) {\n                                        continue;\n                                    }\n                                    aggregated += deltaText;\n                                    flushPartial();\n                                }\n                            }\n                        }\n                        aggregated = aggregated.trim();\n                        const replies = collectReplies(aggregated);\n                        if (replies.length === 0) {\n                            const message = \"模型暂时给不出答案，请换个描述再试试。\";\n                            errors.push({\n                                model,\n                                status: 502,\n                                message\n                            });\n                            streamFailed = true;\n                        } else {\n                            send({\n                                type: \"complete\",\n                                replies\n                            });\n                            controller.close();\n                            return;\n                        }\n                        if (streamFailed) {\n                            continue;\n                        }\n                    }\n                    if (errors.length > 0) {\n                        const [firstError] = errors;\n                        const combined = [\n                            firstError.message,\n                            ...errors.slice(1).map((error)=>`${error.model}: ${error.message}`)\n                        ].filter(Boolean).join(\" ｜ \");\n                        closeWithError(combined || \"模型接口请求失败，请稍后再试。\", firstError.status);\n                    } else {\n                        closeWithError(\"模型接口请求失败，请稍后再试。\", 502);\n                    }\n                } catch (error) {\n                    console.error(\"Streaming pipeline failed\", error);\n                    closeWithError(\"服务暂时不可用，请稍后重试。\", 500);\n                }\n            }\n        });\n        return new Response(stream, {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"application/x-ndjson\",\n                \"Cache-Control\": \"no-cache, no-transform\",\n                Connection: \"keep-alive\",\n                \"Transfer-Encoding\": \"chunked\"\n            }\n        });\n    } catch (error) {\n        console.error(error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"服务暂时不可用，请稍后重试。\"\n        }, {\n            status: 500\n        });\n    }\n}\nconst MIN_INTENSITY = 1;\nconst MAX_INTENSITY = 10;\nconst DEFAULT_INTENSITY = 6;\nfunction buildMessages(opponentLine, intensity) {\n    const toneGuide = describeTone(intensity);\n    return [\n        {\n            role: \"system\",\n            content: [\n                \"你是一名中文犀利斗嘴高手，擅长高情商反击。\",\n                \"始终遵守：输出干净利落，不涉及人身攻击，不触碰法律或伦理底线，也不包含脏话。\",\n                \"禁止输出 <think>、思考过程或任何除最终答案外的文本；不要使用 Markdown 代码块。\",\n                \"所有回答必须严格以 JSON 数组返回，数组包含 3 个纯文本字符串。\"\n            ].join(\" \")\n        },\n        {\n            role: \"user\",\n            content: [\n                \"场景：我在社交平台和人吵架，需要你给出 3 条不同的中文回击。\",\n                `对方的话：${opponentLine}`,\n                `语气强度：${intensity}/10，描述：${toneGuide}`,\n                \"请输出一个 JSON 数组，数组包含 3 个字符串，每条字符串就是一条回击内容，不要包含任何额外文字。\"\n            ].join(\"\\n\")\n        }\n    ];\n}\nfunction describeTone(intensity) {\n    if (intensity <= 3) {\n        return \"保持礼貌、机智、含蓄，但措辞要有感染力。\";\n    }\n    if (intensity <= 7) {\n        return \"直接犀利、针锋相对，同时保持逻辑性和幽默感。\";\n    }\n    return \"言辞犀利、霸气、毫不退让，但仍然避免低俗或明显人身攻击。\";\n}\nfunction mapIntensityToTemperature(intensity) {\n    const normalized = (intensity - MIN_INTENSITY) / (MAX_INTENSITY - MIN_INTENSITY);\n    return Number((0.35 + normalized * 0.65).toFixed(2));\n}\nfunction mapIntensityToPresencePenalty(intensity) {\n    const normalized = (intensity - MIN_INTENSITY) / (MAX_INTENSITY - MIN_INTENSITY);\n    return Number((0.1 + normalized * 0.8).toFixed(2));\n}\nfunction clampIntensity(value) {\n    if (Number.isNaN(value)) {\n        return DEFAULT_INTENSITY;\n    }\n    return Math.min(Math.max(value, MIN_INTENSITY), MAX_INTENSITY);\n}\nfunction normalizeReplies(payload) {\n    if (typeof payload === \"object\" && payload !== null && \"choices\" in payload && Array.isArray(payload.choices)) {\n        const choice = payload.choices[0];\n        const content = extractMessageContent(choice?.message?.content);\n        return collectReplies(content);\n    }\n    return [];\n}\nfunction tryParseJsonArray(raw) {\n    if (!raw) {\n        return [];\n    }\n    try {\n        const parsed = JSON.parse(raw);\n        if (Array.isArray(parsed)) {\n            return parsed.filter((item)=>typeof item === \"string\").map((item)=>item.trim()).filter((item)=>item.length > 0).slice(0, 3);\n        }\n    } catch (error) {\n        console.warn(\"Failed to parse JSON array\", error, raw);\n    }\n    return [];\n}\nfunction fallbackSplit(raw) {\n    if (!raw) {\n        return [];\n    }\n    const forbiddenPatterns = [\n        /^<think\\b[^>]*>/i,\n        /^<\\/think>/i,\n        /^场景[:：]/,\n        /^我的角色[:：]/,\n        /^请[^\\n]*JSON/,\n        /^用户[^\\n]*要求/,\n        /^思考[:：]/,\n        /^角色设定[:：]/\n    ];\n    const forbiddenKeywords = [\n        \"场景：\",\n        \"输出必须\",\n        \"高情商反击\",\n        \"关键点\",\n        \"不要输出\",\n        \"请确保\",\n        \"JSON\"\n    ];\n    return raw.split(/\\n+/).map((line)=>line.replace(/^[\\s\\d\\-•、.]+/, \"\").trim()).filter((line)=>line.length > 0).filter((line)=>!forbiddenPatterns.some((pattern)=>pattern.test(line))).filter((line)=>!forbiddenKeywords.some((keyword)=>line.includes(keyword))).filter(isLikelyReply).slice(0, 3);\n}\nasync function safeRead(response) {\n    try {\n        return await response.json();\n    } catch  {\n        try {\n            return {\n                error: await response.text()\n            };\n        } catch  {\n            return null;\n        }\n    }\n}\nfunction extractErrorMessage(payload) {\n    if (typeof payload === \"object\" && payload !== null && \"error\" in payload) {\n        const error = payload.error;\n        if (typeof error === \"string\" && error.trim()) {\n            return error.trim();\n        }\n        if (typeof error === \"object\" && error !== null && \"message\" in error && typeof error.message === \"string\") {\n            const message = error.message.trim();\n            if (message) {\n                return message;\n            }\n        }\n    }\n    if (typeof payload === \"object\" && payload !== null && \"message\" in payload && typeof payload.message === \"string\") {\n        const fallback = payload.message.trim();\n        if (fallback) {\n            return fallback;\n        }\n    }\n    return \"模型接口请求失败，请稍后再试。\";\n}\nfunction parseModelList(raw) {\n    return raw.split(\",\").map((item)=>item.trim()).filter((item)=>item.length > 0);\n}\nfunction shouldRetry(status, message) {\n    if (status >= 500) {\n        return true;\n    }\n    const lowered = message.toLowerCase();\n    return lowered.includes(\"provider returned error\") || lowered.includes(\"no endpoints found\") || lowered.includes(\"upstream error\") || lowered.includes(\"temporarily unavailable\");\n}\nfunction sanitizeContent(raw) {\n    if (!raw) {\n        return \"\";\n    }\n    return raw.replace(/<think\\b[^>]*>[\\s\\S]*?<\\/think>/gi, \"\").trim();\n}\nfunction extractJsonArrayFromText(raw) {\n    if (!raw) {\n        return null;\n    }\n    const start = raw.indexOf(\"[\");\n    const end = raw.lastIndexOf(\"]\");\n    if (start === -1 || end === -1 || end <= start) {\n        return null;\n    }\n    return raw.slice(start, end + 1);\n}\nfunction extractMessageContent(raw) {\n    if (typeof raw === \"string\") {\n        return raw;\n    }\n    if (Array.isArray(raw)) {\n        return raw.map((item)=>{\n            if (typeof item === \"string\") {\n                return item;\n            }\n            if (typeof item === \"object\" && item !== null && \"text\" in item && typeof item.text === \"string\") {\n                return item.text;\n            }\n            return \"\";\n        }).join(\"\\n\");\n    }\n    if (typeof raw === \"object\" && raw !== null && \"text\" in raw && typeof raw.text === \"string\") {\n        return raw.text;\n    }\n    return \"\";\n}\nfunction isLikelyReply(line) {\n    if (line.length < 6) {\n        return false;\n    }\n    const disallowedStarts = [\n        \"场景\",\n        \"角色\",\n        \"输出\",\n        \"说明\",\n        \"提示\"\n    ];\n    if (disallowedStarts.some((prefix)=>line.startsWith(prefix))) {\n        return false;\n    }\n    const hasSentencePunctuation = /[。？！?!…～~]/.test(line);\n    if (hasSentencePunctuation) {\n        return true;\n    }\n    // Allow short punchlines but require at least one Chinese character.\n    return /[\\u4e00-\\u9fa5]/.test(line) && line.length >= 8;\n}\nfunction extractDeltaText(payload) {\n    if (typeof payload === \"object\" && payload !== null && \"choices\" in payload && Array.isArray(payload.choices)) {\n        const choice = payload.choices[0];\n        if (typeof choice === \"object\" && choice !== null && \"delta\" in choice && typeof choice.delta === \"object\" && choice.delta !== null) {\n            const delta = choice.delta;\n            if (typeof delta === \"object\" && delta !== null && \"content\" in delta) {\n                return extractMessageContent(delta.content);\n            }\n        }\n        if (typeof choice === \"object\" && choice !== null && \"message\" in choice && typeof choice.message === \"object\") {\n            return extractMessageContent(choice.message);\n        }\n    }\n    return \"\";\n}\nfunction arraysEqual(a, b) {\n    if (a.length !== b.length) {\n        return false;\n    }\n    return a.every((item, index)=>item === b[index]);\n}\nfunction collectReplies(rawContent) {\n    const sanitized = sanitizeContent(rawContent);\n    const parsed = tryParseJsonArray(sanitized);\n    if (parsed.length > 0) {\n        return parsed;\n    }\n    const extracted = extractJsonArrayFromText(sanitized);\n    if (extracted) {\n        const extractedParsed = tryParseJsonArray(extracted);\n        if (extractedParsed.length > 0) {\n            return extractedParsed;\n        }\n    }\n    return fallbackSplit(sanitized);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQVc7SUFDM0MsSUFBSUQsRUFBRTdFLE1BQU0sS0FBSzhFLEVBQUU5RSxNQUFNLEVBQUU7UUFDekIsT0FBTztJQUNUO0lBQ0EsT0FBTzZFLEVBQUVFLEtBQUssQ0FBQyxDQUFDM0IsTUFBTTRCLFFBQVU1QixTQUFTMEIsQ0FBQyxDQUFDRSxNQUFNO0FBQ25EO0FBRUEsU0FBU2pGLGVBQWVrRixVQUFrQjtJQUN4QyxNQUFNQyxZQUFZZCxnQkFBZ0JhO0lBQ2xDLE1BQU1oRSxTQUFTaUMsa0JBQWtCZ0M7SUFDakMsSUFBSWpFLE9BQU9qQixNQUFNLEdBQUcsR0FBRztRQUNyQixPQUFPaUI7SUFDVDtJQUNBLE1BQU1rRSxZQUFZZCx5QkFBeUJhO0lBQzNDLElBQUlDLFdBQVc7UUFDYixNQUFNQyxrQkFBa0JsQyxrQkFBa0JpQztRQUMxQyxJQUFJQyxnQkFBZ0JwRixNQUFNLEdBQUcsR0FBRztZQUM5QixPQUFPb0Y7UUFDVDtJQUNGO0lBQ0EsT0FBTy9CLGNBQWM2QjtBQUN2QiIsInNvdXJjZXMiOlsiL1VzZXJzL3poYW5ndGFvL0RvY3VtZW50cy9XZWIvY2hhb2ppYS9hcHAvYXBpL2FyZ3VlL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuXG5jb25zdCBPUEVOUk9VVEVSX1VSTCA9IFwiaHR0cHM6Ly9vcGVucm91dGVyLmFpL2FwaS92MS9jaGF0L2NvbXBsZXRpb25zXCI7XG5jb25zdCBPUEVOUk9VVEVSX01PREVMID1cbiAgcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9NT0RFTCA/PyBcImRlZXBzZWVrL2RlZXBzZWVrLWNoYXQtdjMuMTpmcmVlXCI7XG5cbmNvbnN0IE1PREVMX0ZBTExCQUNLUyA9XG4gIHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfTU9ERUxTID8/XG4gIGAke09QRU5ST1VURVJfTU9ERUx9LG9wZW5yb3V0ZXIvYXV0b2A7XG5cbnR5cGUgUGF5bG9hZCA9IHtcbiAgb3Bwb25lbnRMaW5lPzogdW5rbm93bjtcbiAgaW50ZW5zaXR5PzogdW5rbm93bjtcbn07XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IG9wcG9uZW50TGluZSwgaW50ZW5zaXR5IH06IFBheWxvYWQgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIGlmICh0eXBlb2Ygb3Bwb25lbnRMaW5lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwi6K+35o+Q5L6b5a+55pa555qE6K+d77yI5a2X56ym5Liy77yJ44CCXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHRyaW1tZWRPcHBvbmVudExpbmUgPSBvcHBvbmVudExpbmUudHJpbSgpO1xuICAgIGlmICghdHJpbW1lZE9wcG9uZW50TGluZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIuivt+WFiOi+k+WFpeWvueaWueivtOS6huS7gOS5iOOAglwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJzZWRJbnRlbnNpdHkgPVxuICAgICAgdHlwZW9mIGludGVuc2l0eSA9PT0gXCJudW1iZXJcIlxuICAgICAgICA/IGNsYW1wSW50ZW5zaXR5KGludGVuc2l0eSlcbiAgICAgICAgOiB0eXBlb2YgaW50ZW5zaXR5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgPyBjbGFtcEludGVuc2l0eShOdW1iZXIucGFyc2VJbnQoaW50ZW5zaXR5LCAxMCkpXG4gICAgICAgICAgOiBERUZBVUxUX0lOVEVOU0lUWTtcblxuICAgIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk9QRU5ST1VURVJfQVBJX0tFWTtcbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIk9QRU5ST1VURVJfQVBJX0tFWSBtaXNzaW5nXCIpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIuacjeWKoeWZqOacquato+ehrumFjee9riBPcGVuUm91dGVyIEFQSSBLZXnjgIJcIiB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVmZXJlciA9XG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwib3JpZ2luXCIpID8/IFwiaHR0cHM6Ly9sb2NhbGhvc3QtcGxhY2Vob2xkZXJcIjtcbiAgICBjb25zdCBtb2RlbHMgPSBwYXJzZU1vZGVsTGlzdChNT0RFTF9GQUxMQkFDS1MpO1xuXG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgIHN0YXJ0OiBhc3luYyAoY29udHJvbGxlcikgPT4ge1xuICAgICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICAgIGNvbnN0IHNlbmQgPSAoY2h1bms6IHVua25vd24pID0+IHtcbiAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoYCR7SlNPTi5zdHJpbmdpZnkoY2h1bmspfVxcbmApKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBlcnJvcnM6IEFycmF5PHsgbW9kZWw6IHN0cmluZzsgc3RhdHVzOiBudW1iZXI7IG1lc3NhZ2U6IHN0cmluZyB9PiA9IFtdO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlV2l0aEVycm9yID0gKGVycm9yOiBzdHJpbmcsIHN0YXR1cyA9IDUwMCkgPT4ge1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcImVycm9yXCIsIGVycm9yLCBzdGF0dXMgfSk7XG4gICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yIChjb25zdCBtb2RlbCBvZiBtb2RlbHMpIHtcbiAgICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIm1vZGVsXCIsIG1vZGVsIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBjb21wbGV0aW9uUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChPUEVOUk9VVEVSX1VSTCwge1xuICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgIFwiSFRUUC1SZWZlcmVyXCI6IHJlZmVyZXIsXG4gICAgICAgICAgICAgICAgLy8gSFRUUCBoZWFkZXJzIG11c3Qgc3RheSB3aXRoaW4gdGhlIExhdGluLTEgY2hhcnNldDsgdXNlIEFTQ0lJLW9ubHkgdGl0bGUuXG4gICAgICAgICAgICAgICAgXCJYLVRpdGxlXCI6IFwiQ2hhb2ppYVwiXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IGJ1aWxkTWVzc2FnZXModHJpbW1lZE9wcG9uZW50TGluZSwgcGFyc2VkSW50ZW5zaXR5KSxcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogbWFwSW50ZW5zaXR5VG9UZW1wZXJhdHVyZShwYXJzZWRJbnRlbnNpdHkpLFxuICAgICAgICAgICAgICAgIHRvcF9wOiAwLjksXG4gICAgICAgICAgICAgICAgbWF4X3Rva2VuczogNTEyLFxuICAgICAgICAgICAgICAgIHByZXNlbmNlX3BlbmFsdHk6IG1hcEludGVuc2l0eVRvUHJlc2VuY2VQZW5hbHR5KHBhcnNlZEludGVuc2l0eSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIWNvbXBsZXRpb25SZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICBjb25zdCBlcnJvclBheWxvYWQgPSBhd2FpdCBzYWZlUmVhZChjb21wbGV0aW9uUmVzcG9uc2UpO1xuICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBleHRyYWN0RXJyb3JNZXNzYWdlKGVycm9yUGF5bG9hZCk7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJPcGVuUm91dGVyIGVycm9yXCIsIHsgbW9kZWwsIGVycm9yOiBlcnJvclBheWxvYWQgfSk7XG4gICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGNvbXBsZXRpb25SZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JNZXNzYWdlXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGlmICghc2hvdWxkUmV0cnkoY29tcGxldGlvblJlc3BvbnNlLnN0YXR1cywgZXJyb3JNZXNzYWdlKSkge1xuICAgICAgICAgICAgICAgIGNsb3NlV2l0aEVycm9yKGVycm9yTWVzc2FnZSwgY29tcGxldGlvblJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vIHRyeSBuZXh0IG1vZGVsXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBib2R5ID0gY29tcGxldGlvblJlc3BvbnNlLmJvZHk7XG4gICAgICAgICAgICBpZiAoIWJvZHkpIHtcbiAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1vZGVsLFxuICAgICAgICAgICAgICAgIHN0YXR1czogNTAyLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwi5qih5Z6L6L+U5Zue56m65ZON5bqU77yM6K+356iN5ZCO5YaN6K+V44CCXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSBib2R5LmdldFJlYWRlcigpO1xuICAgICAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpO1xuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9IFwiXCI7XG4gICAgICAgICAgICBsZXQgYWdncmVnYXRlZCA9IFwiXCI7XG4gICAgICAgICAgICBsZXQgbGFzdFNlbnQ6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0IGZsdXNoUGFydGlhbCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgcmVwbGllcyA9IGNvbGxlY3RSZXBsaWVzKGFnZ3JlZ2F0ZWQpO1xuICAgICAgICAgICAgICBpZiAocmVwbGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGFycmF5c0VxdWFsKHJlcGxpZXMsIGxhc3RTZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsYXN0U2VudCA9IHJlcGxpZXM7XG4gICAgICAgICAgICAgIHNlbmQoeyB0eXBlOiBcInBhcnRpYWxcIiwgcmVwbGllcyB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxldCBzdHJlYW1GYWlsZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBidWZmZXIgKz0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IGJ1ZmZlci5zcGxpdChcIlxcblxcblwiKTtcbiAgICAgICAgICAgICAgYnVmZmVyID0gZXZlbnRzLnBvcCgpID8/IFwiXCI7XG5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBvZiBldmVudHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGV2ZW50LnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmF3TGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IHJhd0xpbmUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBsaW5lLnNsaWNlKDUpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgIGlmICghZGF0YSB8fCBkYXRhID09PSBcIltET05FXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZDogdW5rbm93bjtcbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBwYXJzZSBzdHJlYW1pbmcgY2h1bmtcIiwgcGFyc2VFcnJvciwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgY29uc3QgZGVsdGFUZXh0ID0gZXh0cmFjdERlbHRhVGV4dChwYXJzZWQpO1xuICAgICAgICAgICAgICAgICAgaWYgKCFkZWx0YVRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBhZ2dyZWdhdGVkICs9IGRlbHRhVGV4dDtcbiAgICAgICAgICAgICAgICAgIGZsdXNoUGFydGlhbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhZ2dyZWdhdGVkID0gYWdncmVnYXRlZC50cmltKCk7XG4gICAgICAgICAgICBjb25zdCByZXBsaWVzID0gY29sbGVjdFJlcGxpZXMoYWdncmVnYXRlZCk7XG5cbiAgICAgICAgICAgIGlmIChyZXBsaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gXCLmqKHlnovmmoLml7bnu5nkuI3lh7rnrZTmoYjvvIzor7fmjaLkuKrmj4/ov7Dlho3or5Xor5XjgIJcIjtcbiAgICAgICAgICAgICAgZXJyb3JzLnB1c2goeyBtb2RlbCwgc3RhdHVzOiA1MDIsIG1lc3NhZ2UgfSk7XG4gICAgICAgICAgICAgIHN0cmVhbUZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZW5kKHsgdHlwZTogXCJjb21wbGV0ZVwiLCByZXBsaWVzIH0pO1xuICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0cmVhbUZhaWxlZCkge1xuICAgICAgICAgICAgICAvLyB0cnkgbmV4dCBtb2RlbFxuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IFtmaXJzdEVycm9yXSA9IGVycm9ycztcbiAgICAgICAgICAgIGNvbnN0IGNvbWJpbmVkID0gW1xuICAgICAgICAgICAgICBmaXJzdEVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgIC4uLmVycm9ycy5zbGljZSgxKS5tYXAoKGVycm9yKSA9PiBgJHtlcnJvci5tb2RlbH06ICR7ZXJyb3IubWVzc2FnZX1gKVxuICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgICAgICAgIC5qb2luKFwiIO+9nCBcIik7XG4gICAgICAgICAgICBjbG9zZVdpdGhFcnJvcihjb21iaW5lZCB8fCBcIuaooeWei+aOpeWPo+ivt+axguWksei0pe+8jOivt+eojeWQjuWGjeivleOAglwiLCBmaXJzdEVycm9yLnN0YXR1cyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNsb3NlV2l0aEVycm9yKFwi5qih5Z6L5o6l5Y+j6K+35rGC5aSx6LSl77yM6K+356iN5ZCO5YaN6K+V44CCXCIsIDUwMik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJTdHJlYW1pbmcgcGlwZWxpbmUgZmFpbGVkXCIsIGVycm9yKTtcbiAgICAgICAgICBjbG9zZVdpdGhFcnJvcihcIuacjeWKoeaaguaXtuS4jeWPr+eUqO+8jOivt+eojeWQjumHjeivleOAglwiLCA1MDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHN0cmVhbSwge1xuICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC1uZGpzb25cIixcbiAgICAgICAgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tY2FjaGUsIG5vLXRyYW5zZm9ybVwiLFxuICAgICAgICBDb25uZWN0aW9uOiBcImtlZXAtYWxpdmVcIixcbiAgICAgICAgXCJUcmFuc2Zlci1FbmNvZGluZ1wiOiBcImNodW5rZWRcIlxuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgZXJyb3I6IFwi5pyN5Yqh5pqC5pe25LiN5Y+v55So77yM6K+356iN5ZCO6YeN6K+V44CCXCJcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmNvbnN0IE1JTl9JTlRFTlNJVFkgPSAxO1xuY29uc3QgTUFYX0lOVEVOU0lUWSA9IDEwO1xuY29uc3QgREVGQVVMVF9JTlRFTlNJVFkgPSA2O1xuXG5mdW5jdGlvbiBidWlsZE1lc3NhZ2VzKG9wcG9uZW50TGluZTogc3RyaW5nLCBpbnRlbnNpdHk6IG51bWJlcikge1xuICBjb25zdCB0b25lR3VpZGUgPSBkZXNjcmliZVRvbmUoaW50ZW5zaXR5KTtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICByb2xlOiBcInN5c3RlbVwiLFxuICAgICAgY29udGVudDpcbiAgICAgICAgW1xuICAgICAgICAgIFwi5L2g5piv5LiA5ZCN5Lit5paH54qA5Yip5paX5Zi06auY5omL77yM5pOF6ZW/6auY5oOF5ZWG5Y+N5Ye744CCXCIsXG4gICAgICAgICAgXCLlp4vnu4jpgbXlrojvvJrovpPlh7rlubLlh4DliKnokL3vvIzkuI3mtonlj4rkurrouqvmlLvlh7vvvIzkuI3op6bnorDms5XlvovmiJbkvKbnkIblupXnur/vvIzkuZ/kuI3ljIXlkKvohI/or53jgIJcIixcbiAgICAgICAgICBcIuemgeatoui+k+WHuiA8dGhpbms+44CB5oCd6ICD6L+H56iL5oiW5Lu75L2V6Zmk5pyA57uI562U5qGI5aSW55qE5paH5pys77yb5LiN6KaB5L2/55SoIE1hcmtkb3duIOS7o+eggeWdl+OAglwiLFxuICAgICAgICAgIFwi5omA5pyJ5Zue562U5b+F6aG75Lil5qC85LulIEpTT04g5pWw57uE6L+U5Zue77yM5pWw57uE5YyF5ZCrIDMg5Liq57qv5paH5pys5a2X56ym5Liy44CCXCJcbiAgICAgICAgXS5qb2luKFwiIFwiKVxuICAgIH0sXG4gICAge1xuICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICBjb250ZW50OiBbXG4gICAgICAgIFwi5Zy65pmv77ya5oiR5Zyo56S+5Lqk5bmz5Y+w5ZKM5Lq65ZC15p6277yM6ZyA6KaB5L2g57uZ5Ye6IDMg5p2h5LiN5ZCM55qE5Lit5paH5Zue5Ye744CCXCIsXG4gICAgICAgIGDlr7nmlrnnmoTor53vvJoke29wcG9uZW50TGluZX1gLFxuICAgICAgICBg6K+t5rCU5by65bqm77yaJHtpbnRlbnNpdHl9LzEw77yM5o+P6L+w77yaJHt0b25lR3VpZGV9YCxcbiAgICAgICAgXCLor7fovpPlh7rkuIDkuKogSlNPTiDmlbDnu4TvvIzmlbDnu4TljIXlkKsgMyDkuKrlrZfnrKbkuLLvvIzmr4/mnaHlrZfnrKbkuLLlsLHmmK/kuIDmnaHlm57lh7vlhoXlrrnvvIzkuI3opoHljIXlkKvku7vkvZXpop3lpJbmloflrZfjgIJcIlxuICAgICAgXS5qb2luKFwiXFxuXCIpXG4gICAgfVxuICBdO1xufVxuXG5mdW5jdGlvbiBkZXNjcmliZVRvbmUoaW50ZW5zaXR5OiBudW1iZXIpIHtcbiAgaWYgKGludGVuc2l0eSA8PSAzKSB7XG4gICAgcmV0dXJuIFwi5L+d5oyB56S86LKM44CB5py65pm644CB5ZCr6JOE77yM5L2G5o6q6L6e6KaB5pyJ5oSf5p+T5Yqb44CCXCI7XG4gIH1cbiAgaWYgKGludGVuc2l0eSA8PSA3KSB7XG4gICAgcmV0dXJuIFwi55u05o6l54qA5Yip44CB6ZKI6ZSL55u45a+577yM5ZCM5pe25L+d5oyB6YC76L6R5oCn5ZKM5bm96buY5oSf44CCXCI7XG4gIH1cbiAgcmV0dXJuIFwi6KiA6L6e54qA5Yip44CB6Zy45rCU44CB5q+r5LiN6YCA6K6p77yM5L2G5LuN54S26YG/5YWN5L2O5L+X5oiW5piO5pi+5Lq66Lqr5pS75Ye744CCXCI7XG59XG5cbmZ1bmN0aW9uIG1hcEludGVuc2l0eVRvVGVtcGVyYXR1cmUoaW50ZW5zaXR5OiBudW1iZXIpIHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IChpbnRlbnNpdHkgLSBNSU5fSU5URU5TSVRZKSAvIChNQVhfSU5URU5TSVRZIC0gTUlOX0lOVEVOU0lUWSk7XG4gIHJldHVybiBOdW1iZXIoKDAuMzUgKyBub3JtYWxpemVkICogMC42NSkudG9GaXhlZCgyKSk7XG59XG5cbmZ1bmN0aW9uIG1hcEludGVuc2l0eVRvUHJlc2VuY2VQZW5hbHR5KGludGVuc2l0eTogbnVtYmVyKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSAoaW50ZW5zaXR5IC0gTUlOX0lOVEVOU0lUWSkgLyAoTUFYX0lOVEVOU0lUWSAtIE1JTl9JTlRFTlNJVFkpO1xuICByZXR1cm4gTnVtYmVyKCgwLjEgKyBub3JtYWxpemVkICogMC44KS50b0ZpeGVkKDIpKTtcbn1cblxuZnVuY3Rpb24gY2xhbXBJbnRlbnNpdHkodmFsdWU6IG51bWJlcikge1xuICBpZiAoTnVtYmVyLmlzTmFOKHZhbHVlKSkge1xuICAgIHJldHVybiBERUZBVUxUX0lOVEVOU0lUWTtcbiAgfVxuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIE1JTl9JTlRFTlNJVFkpLCBNQVhfSU5URU5TSVRZKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplUmVwbGllcyhwYXlsb2FkOiB1bmtub3duKTogc3RyaW5nW10ge1xuICBpZiAoXG4gICAgdHlwZW9mIHBheWxvYWQgPT09IFwib2JqZWN0XCIgJiZcbiAgICBwYXlsb2FkICE9PSBudWxsICYmXG4gICAgXCJjaG9pY2VzXCIgaW4gcGF5bG9hZCAmJlxuICAgIEFycmF5LmlzQXJyYXkoKHBheWxvYWQgYXMgeyBjaG9pY2VzOiB1bmtub3duIH0pLmNob2ljZXMpXG4gICkge1xuICAgIGNvbnN0IGNob2ljZSA9IChwYXlsb2FkIGFzIHsgY2hvaWNlczogQXJyYXk8eyBtZXNzYWdlPzogeyBjb250ZW50PzogdW5rbm93biB9IH0+IH0pLmNob2ljZXNbMF07XG4gICAgY29uc3QgY29udGVudCA9IGV4dHJhY3RNZXNzYWdlQ29udGVudChjaG9pY2U/Lm1lc3NhZ2U/LmNvbnRlbnQpO1xuICAgIHJldHVybiBjb2xsZWN0UmVwbGllcyhjb250ZW50KTtcbiAgfVxuICByZXR1cm4gW107XG59XG5cbmZ1bmN0aW9uIHRyeVBhcnNlSnNvbkFycmF5KHJhdzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICBpZiAoIXJhdykge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocmF3KSBhcyB1bmtub3duO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZCkpIHtcbiAgICAgIHJldHVybiBwYXJzZWRcbiAgICAgICAgLmZpbHRlcigoaXRlbSk6IGl0ZW0gaXMgc3RyaW5nID0+IHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKVxuICAgICAgICAubWFwKChpdGVtKSA9PiBpdGVtLnRyaW0oKSlcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5sZW5ndGggPiAwKVxuICAgICAgICAuc2xpY2UoMCwgMyk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBwYXJzZSBKU09OIGFycmF5XCIsIGVycm9yLCByYXcpO1xuICB9XG4gIHJldHVybiBbXTtcbn1cblxuZnVuY3Rpb24gZmFsbGJhY2tTcGxpdChyYXc6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpIHtcbiAgaWYgKCFyYXcpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgZm9yYmlkZGVuUGF0dGVybnMgPSBbXG4gICAgL148dGhpbmtcXGJbXj5dKj4vaSxcbiAgICAvXjxcXC90aGluaz4vaSxcbiAgICAvXuWcuuaZr1s677yaXS8sXG4gICAgL17miJHnmoTop5LoibJbOu+8ml0vLFxuICAgIC9e6K+3W15cXG5dKkpTT04vLFxuICAgIC9e55So5oi3W15cXG5dKuimgeaxgi8sXG4gICAgL17mgJ3ogINbOu+8ml0vLFxuICAgIC9e6KeS6Imy6K6+5a6aWzrvvJpdL1xuICBdO1xuICBjb25zdCBmb3JiaWRkZW5LZXl3b3JkcyA9IFtcbiAgICBcIuWcuuaZr++8mlwiLFxuICAgIFwi6L6T5Ye65b+F6aG7XCIsXG4gICAgXCLpq5jmg4XllYblj43lh7tcIixcbiAgICBcIuWFs+mUrueCuVwiLFxuICAgIFwi5LiN6KaB6L6T5Ye6XCIsXG4gICAgXCLor7fnoa7kv51cIixcbiAgICBcIkpTT05cIlxuICBdO1xuICByZXR1cm4gcmF3XG4gICAgLnNwbGl0KC9cXG4rLylcbiAgICAubWFwKChsaW5lKSA9PiBsaW5lLnJlcGxhY2UoL15bXFxzXFxkXFwt4oCi44CBLl0rLywgXCJcIikudHJpbSgpKVxuICAgIC5maWx0ZXIoKGxpbmUpID0+IGxpbmUubGVuZ3RoID4gMClcbiAgICAuZmlsdGVyKChsaW5lKSA9PiAhZm9yYmlkZGVuUGF0dGVybnMuc29tZSgocGF0dGVybikgPT4gcGF0dGVybi50ZXN0KGxpbmUpKSlcbiAgICAuZmlsdGVyKChsaW5lKSA9PiAhZm9yYmlkZGVuS2V5d29yZHMuc29tZSgoa2V5d29yZCkgPT4gbGluZS5pbmNsdWRlcyhrZXl3b3JkKSkpXG4gICAgLmZpbHRlcihpc0xpa2VseVJlcGx5KVxuICAgIC5zbGljZSgwLCAzKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2FmZVJlYWQocmVzcG9uc2U6IFJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgfSBjYXRjaCB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IGVycm9yOiBhd2FpdCByZXNwb25zZS50ZXh0KCkgfTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0RXJyb3JNZXNzYWdlKHBheWxvYWQ6IHVua25vd24pIHtcbiAgaWYgKFxuICAgIHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiICYmXG4gICAgcGF5bG9hZCAhPT0gbnVsbCAmJlxuICAgIFwiZXJyb3JcIiBpbiBwYXlsb2FkXG4gICkge1xuICAgIGNvbnN0IGVycm9yID0gKHBheWxvYWQgYXMgeyBlcnJvcjogdW5rbm93biB9KS5lcnJvcjtcbiAgICBpZiAodHlwZW9mIGVycm9yID09PSBcInN0cmluZ1wiICYmIGVycm9yLnRyaW0oKSkge1xuICAgICAgcmV0dXJuIGVycm9yLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmXG4gICAgICBlcnJvciAhPT0gbnVsbCAmJlxuICAgICAgXCJtZXNzYWdlXCIgaW4gZXJyb3IgJiZcbiAgICAgIHR5cGVvZiAoZXJyb3IgYXMgeyBtZXNzYWdlPzogdW5rbm93biB9KS5tZXNzYWdlID09PSBcInN0cmluZ1wiXG4gICAgKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gKGVycm9yIGFzIHsgbWVzc2FnZTogc3RyaW5nIH0pLm1lc3NhZ2UudHJpbSgpO1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChcbiAgICB0eXBlb2YgcGF5bG9hZCA9PT0gXCJvYmplY3RcIiAmJlxuICAgIHBheWxvYWQgIT09IG51bGwgJiZcbiAgICBcIm1lc3NhZ2VcIiBpbiBwYXlsb2FkICYmXG4gICAgdHlwZW9mIChwYXlsb2FkIGFzIHsgbWVzc2FnZT86IHVua25vd24gfSkubWVzc2FnZSA9PT0gXCJzdHJpbmdcIlxuICApIHtcbiAgICBjb25zdCBmYWxsYmFjayA9IChwYXlsb2FkIGFzIHsgbWVzc2FnZTogc3RyaW5nIH0pLm1lc3NhZ2UudHJpbSgpO1xuICAgIGlmIChmYWxsYmFjaykge1xuICAgICAgcmV0dXJuIGZhbGxiYWNrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gXCLmqKHlnovmjqXlj6Por7fmsYLlpLHotKXvvIzor7fnqI3lkI7lho3or5XjgIJcIjtcbn1cblxuZnVuY3Rpb24gcGFyc2VNb2RlbExpc3QocmF3OiBzdHJpbmcpIHtcbiAgcmV0dXJuIHJhd1xuICAgIC5zcGxpdChcIixcIilcbiAgICAubWFwKChpdGVtKSA9PiBpdGVtLnRyaW0oKSlcbiAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLmxlbmd0aCA+IDApO1xufVxuXG5mdW5jdGlvbiBzaG91bGRSZXRyeShzdGF0dXM6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKSB7XG4gIGlmIChzdGF0dXMgPj0gNTAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgY29uc3QgbG93ZXJlZCA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIChcbiAgICBsb3dlcmVkLmluY2x1ZGVzKFwicHJvdmlkZXIgcmV0dXJuZWQgZXJyb3JcIikgfHxcbiAgICBsb3dlcmVkLmluY2x1ZGVzKFwibm8gZW5kcG9pbnRzIGZvdW5kXCIpIHx8XG4gICAgbG93ZXJlZC5pbmNsdWRlcyhcInVwc3RyZWFtIGVycm9yXCIpIHx8XG4gICAgbG93ZXJlZC5pbmNsdWRlcyhcInRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlXCIpXG4gICk7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplQ29udGVudChyYXc6IHN0cmluZykge1xuICBpZiAoIXJhdykge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIHJldHVybiByYXcucmVwbGFjZSgvPHRoaW5rXFxiW14+XSo+W1xcc1xcU10qPzxcXC90aGluaz4vZ2ksIFwiXCIpLnRyaW0oKTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEpzb25BcnJheUZyb21UZXh0KHJhdzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCkge1xuICBpZiAoIXJhdykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IHN0YXJ0ID0gcmF3LmluZGV4T2YoXCJbXCIpO1xuICBjb25zdCBlbmQgPSByYXcubGFzdEluZGV4T2YoXCJdXCIpO1xuICBpZiAoc3RhcnQgPT09IC0xIHx8IGVuZCA9PT0gLTEgfHwgZW5kIDw9IHN0YXJ0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHJhdy5zbGljZShzdGFydCwgZW5kICsgMSk7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RNZXNzYWdlQ29udGVudChyYXc6IHVua25vd24pOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHJhdyA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiByYXc7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkocmF3KSkge1xuICAgIHJldHVybiByYXdcbiAgICAgIC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgaXRlbSAhPT0gbnVsbCAmJlxuICAgICAgICAgIFwidGV4dFwiIGluIGl0ZW0gJiZcbiAgICAgICAgICB0eXBlb2YgKGl0ZW0gYXMgeyB0ZXh0PzogdW5rbm93biB9KS50ZXh0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiAoaXRlbSBhcyB7IHRleHQ6IHN0cmluZyB9KS50ZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXFxuXCIpO1xuICB9XG4gIGlmIChcbiAgICB0eXBlb2YgcmF3ID09PSBcIm9iamVjdFwiICYmXG4gICAgcmF3ICE9PSBudWxsICYmXG4gICAgXCJ0ZXh0XCIgaW4gcmF3ICYmXG4gICAgdHlwZW9mIChyYXcgYXMgeyB0ZXh0PzogdW5rbm93biB9KS50ZXh0ID09PSBcInN0cmluZ1wiXG4gICkge1xuICAgIHJldHVybiAocmF3IGFzIHsgdGV4dDogc3RyaW5nIH0pLnRleHQ7XG4gIH1cbiAgcmV0dXJuIFwiXCI7XG59XG5cbmZ1bmN0aW9uIGlzTGlrZWx5UmVwbHkobGluZTogc3RyaW5nKSB7XG4gIGlmIChsaW5lLmxlbmd0aCA8IDYpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgZGlzYWxsb3dlZFN0YXJ0cyA9IFtcIuWcuuaZr1wiLCBcIuinkuiJslwiLCBcIui+k+WHulwiLCBcIuivtOaYjlwiLCBcIuaPkOekulwiXTtcbiAgaWYgKGRpc2FsbG93ZWRTdGFydHMuc29tZSgocHJlZml4KSA9PiBsaW5lLnN0YXJ0c1dpdGgocHJlZml4KSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgaGFzU2VudGVuY2VQdW5jdHVhdGlvbiA9IC9b44CC77yf77yBPyHigKbvvZ5+XS8udGVzdChsaW5lKTtcbiAgaWYgKGhhc1NlbnRlbmNlUHVuY3R1YXRpb24pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvLyBBbGxvdyBzaG9ydCBwdW5jaGxpbmVzIGJ1dCByZXF1aXJlIGF0IGxlYXN0IG9uZSBDaGluZXNlIGNoYXJhY3Rlci5cbiAgcmV0dXJuIC9bXFx1NGUwMC1cXHU5ZmE1XS8udGVzdChsaW5lKSAmJiBsaW5lLmxlbmd0aCA+PSA4O1xufVxuXG5mdW5jdGlvbiBleHRyYWN0RGVsdGFUZXh0KHBheWxvYWQ6IHVua25vd24pIHtcbiAgaWYgKFxuICAgIHR5cGVvZiBwYXlsb2FkID09PSBcIm9iamVjdFwiICYmXG4gICAgcGF5bG9hZCAhPT0gbnVsbCAmJlxuICAgIFwiY2hvaWNlc1wiIGluIHBheWxvYWQgJiZcbiAgICBBcnJheS5pc0FycmF5KChwYXlsb2FkIGFzIHsgY2hvaWNlczogdW5rbm93biB9KS5jaG9pY2VzKVxuICApIHtcbiAgICBjb25zdCBjaG9pY2UgPSAocGF5bG9hZCBhcyB7IGNob2ljZXM6IEFycmF5PHVua25vd24+IH0pLmNob2ljZXNbMF07XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGNob2ljZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgY2hvaWNlICE9PSBudWxsICYmXG4gICAgICBcImRlbHRhXCIgaW4gY2hvaWNlICYmXG4gICAgICB0eXBlb2YgKGNob2ljZSBhcyB7IGRlbHRhPzogdW5rbm93biB9KS5kZWx0YSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgKGNob2ljZSBhcyB7IGRlbHRhPzogdW5rbm93biB9KS5kZWx0YSAhPT0gbnVsbFxuICAgICkge1xuICAgICAgY29uc3QgZGVsdGEgPSAoY2hvaWNlIGFzIHsgZGVsdGE6IHVua25vd24gfSkuZGVsdGE7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBkZWx0YSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBkZWx0YSAhPT0gbnVsbCAmJlxuICAgICAgICBcImNvbnRlbnRcIiBpbiBkZWx0YVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBleHRyYWN0TWVzc2FnZUNvbnRlbnQoKGRlbHRhIGFzIHsgY29udGVudD86IHVua25vd24gfSkuY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBjaG9pY2UgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgIGNob2ljZSAhPT0gbnVsbCAmJlxuICAgICAgXCJtZXNzYWdlXCIgaW4gY2hvaWNlICYmXG4gICAgICB0eXBlb2YgKGNob2ljZSBhcyB7IG1lc3NhZ2U/OiB1bmtub3duIH0pLm1lc3NhZ2UgPT09IFwib2JqZWN0XCJcbiAgICApIHtcbiAgICAgIHJldHVybiBleHRyYWN0TWVzc2FnZUNvbnRlbnQoKGNob2ljZSBhcyB7IG1lc3NhZ2U/OiB1bmtub3duIH0pLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gXCJcIjtcbn1cblxuZnVuY3Rpb24gYXJyYXlzRXF1YWwoYTogc3RyaW5nW10sIGI6IHN0cmluZ1tdKSB7XG4gIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGEuZXZlcnkoKGl0ZW0sIGluZGV4KSA9PiBpdGVtID09PSBiW2luZGV4XSk7XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3RSZXBsaWVzKHJhd0NvbnRlbnQ6IHN0cmluZykge1xuICBjb25zdCBzYW5pdGl6ZWQgPSBzYW5pdGl6ZUNvbnRlbnQocmF3Q29udGVudCk7XG4gIGNvbnN0IHBhcnNlZCA9IHRyeVBhcnNlSnNvbkFycmF5KHNhbml0aXplZCk7XG4gIGlmIChwYXJzZWQubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZWQ7XG4gIH1cbiAgY29uc3QgZXh0cmFjdGVkID0gZXh0cmFjdEpzb25BcnJheUZyb21UZXh0KHNhbml0aXplZCk7XG4gIGlmIChleHRyYWN0ZWQpIHtcbiAgICBjb25zdCBleHRyYWN0ZWRQYXJzZWQgPSB0cnlQYXJzZUpzb25BcnJheShleHRyYWN0ZWQpO1xuICAgIGlmIChleHRyYWN0ZWRQYXJzZWQubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIGV4dHJhY3RlZFBhcnNlZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbGxiYWNrU3BsaXQoc2FuaXRpemVkKTtcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJPUEVOUk9VVEVSX1VSTCIsIk9QRU5ST1VURVJfTU9ERUwiLCJwcm9jZXNzIiwiZW52IiwiTU9ERUxfRkFMTEJBQ0tTIiwiT1BFTlJPVVRFUl9NT0RFTFMiLCJQT1NUIiwicmVxdWVzdCIsIm9wcG9uZW50TGluZSIsImludGVuc2l0eSIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInRyaW1tZWRPcHBvbmVudExpbmUiLCJ0cmltIiwicGFyc2VkSW50ZW5zaXR5IiwiY2xhbXBJbnRlbnNpdHkiLCJOdW1iZXIiLCJwYXJzZUludCIsIkRFRkFVTFRfSU5URU5TSVRZIiwiYXBpS2V5IiwiT1BFTlJPVVRFUl9BUElfS0VZIiwiY29uc29sZSIsInJlZmVyZXIiLCJoZWFkZXJzIiwiZ2V0IiwibW9kZWxzIiwicGFyc2VNb2RlbExpc3QiLCJzdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsInN0YXJ0IiwiY29udHJvbGxlciIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsInNlbmQiLCJjaHVuayIsImVucXVldWUiLCJlbmNvZGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3JzIiwiY2xvc2VXaXRoRXJyb3IiLCJ0eXBlIiwiY2xvc2UiLCJtb2RlbCIsImNvbXBsZXRpb25SZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiQXV0aG9yaXphdGlvbiIsImJvZHkiLCJtZXNzYWdlcyIsImJ1aWxkTWVzc2FnZXMiLCJ0ZW1wZXJhdHVyZSIsIm1hcEludGVuc2l0eVRvVGVtcGVyYXR1cmUiLCJ0b3BfcCIsIm1heF90b2tlbnMiLCJwcmVzZW5jZV9wZW5hbHR5IiwibWFwSW50ZW5zaXR5VG9QcmVzZW5jZVBlbmFsdHkiLCJvayIsImVycm9yUGF5bG9hZCIsInNhZmVSZWFkIiwiZXJyb3JNZXNzYWdlIiwiZXh0cmFjdEVycm9yTWVzc2FnZSIsInB1c2giLCJtZXNzYWdlIiwic2hvdWxkUmV0cnkiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJkZWNvZGVyIiwiVGV4dERlY29kZXIiLCJidWZmZXIiLCJhZ2dyZWdhdGVkIiwibGFzdFNlbnQiLCJmbHVzaFBhcnRpYWwiLCJyZXBsaWVzIiwiY29sbGVjdFJlcGxpZXMiLCJsZW5ndGgiLCJhcnJheXNFcXVhbCIsInN0cmVhbUZhaWxlZCIsInZhbHVlIiwiZG9uZSIsInJlYWQiLCJkZWNvZGUiLCJldmVudHMiLCJzcGxpdCIsInBvcCIsImV2ZW50IiwibGluZXMiLCJyYXdMaW5lIiwibGluZSIsInN0YXJ0c1dpdGgiLCJkYXRhIiwic2xpY2UiLCJwYXJzZWQiLCJwYXJzZSIsInBhcnNlRXJyb3IiLCJ3YXJuIiwiZGVsdGFUZXh0IiwiZXh0cmFjdERlbHRhVGV4dCIsImZpcnN0RXJyb3IiLCJjb21iaW5lZCIsIm1hcCIsImZpbHRlciIsIkJvb2xlYW4iLCJqb2luIiwiUmVzcG9uc2UiLCJDb25uZWN0aW9uIiwiTUlOX0lOVEVOU0lUWSIsIk1BWF9JTlRFTlNJVFkiLCJ0b25lR3VpZGUiLCJkZXNjcmliZVRvbmUiLCJyb2xlIiwiY29udGVudCIsIm5vcm1hbGl6ZWQiLCJ0b0ZpeGVkIiwiaXNOYU4iLCJNYXRoIiwibWluIiwibWF4Iiwibm9ybWFsaXplUmVwbGllcyIsInBheWxvYWQiLCJBcnJheSIsImlzQXJyYXkiLCJjaG9pY2VzIiwiY2hvaWNlIiwiZXh0cmFjdE1lc3NhZ2VDb250ZW50IiwidHJ5UGFyc2VKc29uQXJyYXkiLCJyYXciLCJpdGVtIiwiZmFsbGJhY2tTcGxpdCIsImZvcmJpZGRlblBhdHRlcm5zIiwiZm9yYmlkZGVuS2V5d29yZHMiLCJyZXBsYWNlIiwic29tZSIsInBhdHRlcm4iLCJ0ZXN0Iiwia2V5d29yZCIsImluY2x1ZGVzIiwiaXNMaWtlbHlSZXBseSIsInJlc3BvbnNlIiwidGV4dCIsImZhbGxiYWNrIiwibG93ZXJlZCIsInRvTG93ZXJDYXNlIiwic2FuaXRpemVDb250ZW50IiwiZXh0cmFjdEpzb25BcnJheUZyb21UZXh0IiwiaW5kZXhPZiIsImVuZCIsImxhc3RJbmRleE9mIiwiZGlzYWxsb3dlZFN0YXJ0cyIsInByZWZpeCIsImhhc1NlbnRlbmNlUHVuY3R1YXRpb24iLCJkZWx0YSIsImEiLCJiIiwiZXZlcnkiLCJpbmRleCIsInJhd0NvbnRlbnQiLCJzYW5pdGl6ZWQiLCJleHRyYWN0ZWQiLCJleHRyYWN0ZWRQYXJzZWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/argue/route.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fargue%2Froute&page=%2Fapi%2Fargue%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fargue%2Froute.ts&appDir=%2FUsers%2Fzhangtao%2FDocuments%2FWeb%2Fchaojia%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzhangtao%2FDocuments%2FWeb%2Fchaojia&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fargue%2Froute&page=%2Fapi%2Fargue%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fargue%2Froute.ts&appDir=%2FUsers%2Fzhangtao%2FDocuments%2FWeb%2Fchaojia%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzhangtao%2FDocuments%2FWeb%2Fchaojia&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_zhangtao_Documents_Web_chaojia_app_api_argue_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/argue/route.ts */ \"(rsc)/./app/api/argue/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/argue/route\",\n        pathname: \"/api/argue\",\n        filename: \"route\",\n        bundlePath: \"app/api/argue/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/zhangtao/Documents/Web/chaojia/app/api/argue/route.ts\",\n    nextConfigOutput,\n    userland: _Users_zhangtao_Documents_Web_chaojia_app_api_argue_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/argue/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhcmd1ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYXJndWUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhcmd1ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnpoYW5ndGFvJTJGRG9jdW1lbnRzJTJGV2ViJTJGY2hhb2ppYSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ6aGFuZ3RhbyUyRkRvY3VtZW50cyUyRldlYiUyRmNoYW9qaWEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNkO0FBQ1M7QUFDTztBQUNLO0FBQ21DO0FBQ2pEO0FBQ087QUFDZjtBQUNzQztBQUN6QjtBQUNNO0FBQ0M7QUFDaEI7QUFDdUI7QUFDekY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9EO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNE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YjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ04sNkJBQTZCLDZGQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvemhhbmd0YW8vRG9jdW1lbnRzL1dlYi9jaGFvamlhL2FwcC9hcGkvYXJndWUvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FyZ3VlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXJndWVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FyZ3VlL3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy96aGFuZ3Rhby9Eb2N1bWVudHMvV2ViL2NoYW9qaWEvYXBwL2FwaS9hcmd1ZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL2FyZ3VlL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fargue%2Froute&page=%2Fapi%2Fargue%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fargue%2Froute.ts&appDir=%2FUsers%2Fzhangtao%2FDocuments%2FWeb%2Fchaojia%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzhangtao%2FDocuments%2FWeb%2Fchaojia&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fargue%2Froute&page=%2Fapi%2Fargue%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fargue%2Froute.ts&appDir=%2FUsers%2Fzhangtao%2FDocuments%2FWeb%2Fchaojia%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzhangtao%2FDocuments%2FWeb%2Fchaojia&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();